From 944e0e8919a6357e2932e1eccffb6db15a94e3cc Mon Sep 17 00:00:00 2001
From: Paul Lesniewski <paul@squirrelmail.org>
Date: Wed, 18 Aug 2010 23:10:46 +0000
Subject: [PATCH 03/50] Add notes about avoiding port 993 in the server config
 since IMAP Proxy uses STARTTLS

git-svn-id: https://svn.code.sf.net/p/squirrelmail/code/trunk/imap_proxy@14049 7612ce4b-ef26-0410-bec9-ea0150e637f0
---
 README.ssl             | 3 ++-
 scripts/imapproxy.conf | 5 +++++
 2 files changed, 7 insertions(+), 1 deletion(-)

diff --git a/README.ssl b/README.ssl
index 7497c2f..5d11372 100644
--- a/README.ssl
+++ b/README.ssl
@@ -13,7 +13,8 @@ advertising LOGINDISABLED in the capability string.
 
 squirrelmail-imap_proxy does not support the deprecated notion of imaps
 using port 993.  It only supports the use of the STARTTLS command to
-initiate SSL/TLS from within a regular IMAP connection.
+initiate SSL/TLS from within a regular IMAP connection.  (Do NOT set the
+"server_port" setting in imapproxy.conf to 993!)
 
 There are four configuration file options that you'll have to set in order
 for SSL to work.  They are tls_ca_file, tls_ca_path, tls_cert_file and
diff --git a/scripts/imapproxy.conf b/scripts/imapproxy.conf
index cfd20cd..fda8f14 100644
--- a/scripts/imapproxy.conf
+++ b/scripts/imapproxy.conf
@@ -58,6 +58,11 @@ listen_port 143
 ##
 ## This setting specifies the port that server_hostname is listening on.
 ## This is the tcp port that we proxy inbound connections to.
+##
+## If you are using SSL with IMAP Proxy, note that unless the server is
+## highly non-standard, this should still be set to the server's normal,
+## unencrypted IMAP port and should NOT be set to port 993, since IMAP
+## Proxy uses STARTTLS to encrypt a "normal" IMAP connection.
 # 
 server_port 143
 
-- 
2.7.4

